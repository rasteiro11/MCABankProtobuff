syntax = "proto3";

package mcabank.balance;

option go_package = "proto/payment";

service BalanceService {
  rpc GetBalances(GetBalancesRequest) returns (GetBalancesResponse);
  rpc CreateBalance(CreateBalanceRequest) returns (CreateBalanceResponse);
}

service PaymentService {
  rpc Deposit(DepositRequest) returns (DepositResponse);
  rpc Transfer(TransferRequest) returns (TransferResponse);
}

message DepositRequest {
  uint32 customer_id = 1;
  double amount = 2;
  string idempotency_key = 3;
}

message DepositResponse {
}

message TransferRequest {
  uint32 customer_id = 1;
  double amount = 3;
  string idempotency_key = 4;
}

message TransferResponse {
}

message Balance {
  uint32 id = 1;
  uint32 customer_id = 2;
  double balance = 3;
  double blocked_balance = 4;
}

message GetBalancesRequest {
  repeated uint32 customer_ids = 1;
}

message GetBalancesResponse {
  repeated Balance balances = 1;
}

message CreateBalanceRequest {
  uint32 customer_id = 1;
}

message CreateBalanceResponse {
  Balance balance = 1;
}

